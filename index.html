<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Siya's Safe Space 💖</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #ffe0e9, #fff5f8);
      color: #333;
      padding: 20px;
      text-align: center;
    }

    .hidden {
      display: none;
    }

    .container {
      max-width: 500px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(255, 105, 180, 0.2);
    }

    input[type="password"],
    textarea {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 10px;
      font-size: 16px;
    }

    button {
      background-color: #ff69b4;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 10px;
      cursor: pointer;
    }

    button:hover {
      background-color: #ff85c1;
    }

    .mood-option {
      margin: 5px 0;
      text-align: left;
    }
  </style>
</head>

<body>
  <div id="passwordScreen" class="container">
    <h2>Siya's Secret Safe Space 🔐</h2>
    <p>Enter your secret password to continue 💗</p>
    <input type="password" id="passwordInput" placeholder="Password here..." />
    <button onclick="checkPassword()">Unlock</button>
    <p id="errorMessage" style="color: red; margin-top: 10px;"></p>
    <p style="color: #777; margin-top: 5px;">
      Hint: First letters of us + the date love restarted 💫
    </p>
  </div>

  <div id="formScreen" class="container hidden">
    <h2>Hey Siya 🩷</h2>
    <p>I’m listening with all my heart. What’s going on?</p>

    <form id="grievanceForm" onsubmit="handleSubmit(event)">
      <div class="mood-option">
        <label><input type="radio" name="mood" value="Sad" required /> Sad</label><br />
        <label><input type="radio" name="mood" value="Angry" /> Angry</label><br />
        <label><input type="radio" name="mood" value="Disappointed" /> Disappointed</label><br />
        <label><input type="radio" name="mood" value="Just Venting" /> Just Venting</label>
      </div>

      <textarea id="ventText" placeholder="Tell me everything you feel like saying..." rows="5" required></textarea>

      <button type="submit">Submit 💌</button>
    </form>

    <div id="responseMessage" class="hidden" style="margin-top: 20px;">
      <h3>Your feelings are safe with me 💖</h3>
      <p id="loveMessage"></p>

      <button onclick="alert('A warm hug has been sent to Nitesh ❤️')">Send Him a Hug 🤗</button>
      <br /><br />
      <button onclick="resetForm()">Submit Another One</button>
    </div>
  </div>

  <script>
    const PASSWORD = "sn0908";

    function checkPassword() {
      const input = document.getElementById("passwordInput").value;
      if (input === PASSWORD) {
        document.getElementById("passwordScreen").classList.add("hidden");
        document.getElementById("formScreen").classList.remove("hidden");
      } else {
        document.getElementById("errorMessage").innerText = "Wrong password, try again sweetheart 💔";
      }
    }

    function handleSubmit(e) {
      e.preventDefault();
      const mood = document.querySelector('input[name="mood"]:checked')?.value;
      const message = document.getElementById("ventText").value;

      // Save in local storage
      let entries = JSON.parse(localStorage.getItem("ventEntries")) || [];
      entries.push({
        mood: mood,
        message: message,
        date: new Date().toLocaleString()
      });
      localStorage.setItem("ventEntries", JSON.stringify(entries));

      // Random love message
      const messages = [
        "I'm proud of you for expressing this.",
        "You're my safe place too.",
        "Let me hold your hand through this.",
        "You’re strong, but you don’t have to be alone.",
        "Whatever you feel, I’m listening without judgment."
      ];
      const randomMsg = messages[Math.floor(Math.random() * messages.length)];
      document.getElementById("loveMessage").innerText = randomMsg;

      // Confetti blast 🎉
      confetti({
        particleCount: 150,
        spread: 70,
        origin: { y: 0.6 }
      });

      // Switch UI
      document.getElementById("grievanceForm").classList.add("hidden");
      document.getElementById("responseMessage").classList.remove("hidden");
    }

    function resetForm() {
      document.getElementById("grievanceForm").reset();
      document.getElementById("grievanceForm").classList.remove("hidden");
      document.getElementById("responseMessage").classList.add("hidden");
    }
  </script>
</body>
</html>
